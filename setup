#!/usr/bin/env bash

_print_header() {
  printf "\n\e[0;32m > $1\n\n\e[0m"
}

declare -a packages=(
  'zsh'
  'tmux'
  'tree'
  'coreutils'
)

# authenticate user
sudo -v

# packages
_print_header 'installing packages:'
case $(uname) in
  'Darwin')
    for package in "${packages[@]}"
    do
      brew install $package
    done
    ;;
  'Linux')
    sudo apt-get update
    sudo apt-get install colortest
    for package in "${packages[@]}"
    do
      sudo apt-get install $package
    done
    ;;
esac

_print_header 'changing shell:'
# change shell to zsh
case $(uname) in
  'Darwin')
    chsh -s '/bin/zsh'
    ;;
  'Linux')
    chsh -s $(which zsh)
    ;;
esac

# symlink dots
_print_header 'moving old dots into ~/.old_dots_backup and building symlinks:'
case $(uname) in
  'Darwin')
    symlink_setup="$(dirname $(greadlink -f $BASH_SOURCE))/symlink_setup"
    ;;
  'Linux')
    symlink_setup="$(dirname $(readlink -f $0))/symlink_setup"
    ;;
esac

source $symlink_setup
